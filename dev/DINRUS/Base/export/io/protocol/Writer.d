module io.protocol.Writer;

private import  io.Buffer;
public  import io.model, io.protocol.model;


/*******************************************************************************

        Базовый класс Писатель.  Писатели предоставляют средства добавления
		форматированных данных в ИБуфер, и выставляют удобный метод для обработки
        данных различных типов. В дополнение к записи таких исконных типов, как
        целое и ткст, писатели также обрабатывают любой класс, который
        реализует интерфейс ИЗаписываемое (один метод).

        Все писатели поддерживают полный набор исконных типов данных, плюс их
        фундаментальные варианты массивов. Операции могут сцепляться край-к-краю.

        Писатели поддерживают Java-вскую нотацию получи(). Однако, в стиле предка Динруса
        помещать элементы ввода-вывода внутри их собственных скобок, наподобии этого:

        ---
        пиши (счёт) (" green bottles");
        ---

        Заметьте, что каждый элемент записано отделён; этот стиль пристрастно
        известен как "шёпот". Код ниже иллюстрирует базовые операции над
        буфером памяти:
        
        ---
        auto буф = new Буфер (256);

        // картировать один и тот же буфер всем читателям и писателям
        auto читай = new Читатель (буф);
        auto пиши = new Писатель (буф);

        цел i = 10;
        дол j = 20;
        дво d = 3.14159;
        ткст c = "fred";

        // выпишим типы данных
        пиши (c) (i) (j) (d);

        // читаем их обратно
        читай (c) (i) (j) (d);


         // опять то же самое, но используем синтаксис помести()
		 
        пиши.помести(c).помести(i).помести(j).помести(d);
        читай.получи(c).получи(i).получи(j).получи(d);

        ---

        Читатели также могут использоваться с любым классом, реализующим
		интерфейс ИЗаписываемое, вместе с любой структурой, реализующей
		эквивалентную функцию.
*******************************************************************************/


extern(D) class Писатель : ИПисатель
{

    /***********************************************************************

            Конструирует Писатель на предоставленный протокол.

    ***********************************************************************/

    this (ИПротокол протокол);

    /***********************************************************************

            Конструирует Писатель на указанный ИПотокВывода. Делаем
            свою собственную обработку протокола, эквивалентную ПротоколНатив.

    ***********************************************************************/

    this (ИПотокВывода поток);

    /***********************************************************************

            Вернуть ассоциированный буфер.

    ***********************************************************************/

    final ИБуфер буфер ();

    /***********************************************************************

            Сгенерировать начало строки.

    ***********************************************************************/

    ИПисатель нс ();

    /***********************************************************************

            Устанавливает последовательность начала строки.

    ***********************************************************************/

    ИПисатель нс (ткст кс);

    /***********************************************************************

            Слитьe вывод этого писателя и вернуть связуэщую ссылку.
			
    ***********************************************************************/

    final ИПисатель слей ();

    /***********************************************************************

            Слить этот писатель. Этот метод использует синтаксис "шёпот".

    ***********************************************************************/

    final ИПисатель помести ();

    /***********************************************************************

            
            Записать посредством делегата в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (ИПисатель.Клозура дг);

    /***********************************************************************

            Записать класс в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (ИЗаписываемое x);

    /***********************************************************************

            Записать булево значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бул x);

    /***********************************************************************

            Записать беззначное байтовое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (ббайт x);

    /***********************************************************************

            Записать байтовое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (байт x);

    /***********************************************************************

           Записать беззначное краткое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бкрат x);

    /***********************************************************************

            Записать краткое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (крат x);

    /***********************************************************************

           Записать беззначное целое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бцел x);

    /***********************************************************************

           Записать целое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (цел x);

    /***********************************************************************

            Записать беззначное долгое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бдол x);

    /***********************************************************************

            Записать долгое значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дол x);

    /***********************************************************************

            Записать плавающее значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (плав x);

    /***********************************************************************

            Записать двойное значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дво x);

    /***********************************************************************

           Записать реальное значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (реал x);

    /***********************************************************************

            Записать символьное значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (сим x);

    /***********************************************************************

            Записать широкосимвольное значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (шим x);

    /***********************************************************************

            Записать двойное символьное значение в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дим x);

    /***********************************************************************

            Записать булев массив в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бул[] x);

    /***********************************************************************

            Записать байтовый массив в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (байт[] x);

    /***********************************************************************

            Записать массив из беззначных байтовых значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (ббайт[] x);

    /***********************************************************************

           Записать массив из кратких значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (крат[] x);

    /***********************************************************************

           Записать массив из беззначных кратких значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бкрат[] x);

    /***********************************************************************

            Записать массив из целочисленных значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (цел[] x);

    /***********************************************************************

           Записать массив из беззначных целых значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бцел[] x);

    /***********************************************************************

           Записать массив долгих значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дол[] x);

    /***********************************************************************

            Записать массив из беззначных долгих значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (бдол[] x);

    /***********************************************************************

            Записать массив из плавающих значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (плав[] x);

    /***********************************************************************

            Записать массив из двойных значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дво[] x);

    /***********************************************************************

            Записать массив реальных значений в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (реал[] x);

    /***********************************************************************

           Записать символьный массив в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (ткст x);

    /***********************************************************************

            Записать широкосимвольный массив в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (шим[] x);

    /***********************************************************************

            Записать двойной символьный массив в текущей позиции буфера.

    ***********************************************************************/

    final ИПисатель помести (дим[] x);
/+
    /***********************************************************************


            Dump Массив контент преобр_в the буфер. Note that the default
            behaviour is в_ префикс with the Массив байт счёт

    ***********************************************************************/

   // private проц пишиМассив (ук ист, бцел байты, ИПротокол.Тип тип);

    /***********************************************************************

            Dump контент преобр_в the буфер

    ***********************************************************************/

   // private проц пишиЭлемент (ук ист, бцел байты, ИПротокол.Тип тип);
   +/
}
